<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
	xmlns:lang="http://www.springframework.org/schema/lang"
	xsi:schemaLocation="
	http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
	http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang-2.5.xsd
	">

	<import
		resource="classpath:/org/argeo/slc/core/test/spring/applicationContext.xml" />

	<import resource="testCases/basic-001.xml" />
	<import resource="testCases/basic-002.xml" />

	<bean id="executionFlow.basic1" class="org.argeo.slc.executionflow.SimpleExecutionFlow">
		<meta key="meta1" value="mata1Value" />
		<qualifier>
			<attribute key="qual1" value="qual1value" />
		</qualifier>
		<property name="executables">
			<list>
				<ref local="testGroovyImpl" />
				<ref local="testBshImpl" />
				<bean parent="testRun" p:testDefinition-ref="testDef"
					p:testData-ref="testData-${testCase}" />
				<bean parent="testRun" p:testDefinition-ref="testDef"
					p:testData-ref="testData-${testCase}" />
			</list>
		</property>
	</bean>

	<lang:groovy id="executionFlow.groovy1" script-source="src/slc/conf/BasicExecutionFlow.groovy">
		<lang:property name="firstSubTest">
			<bean parent="testRun" p:testDefinition-ref="testDef"
				p:testData-ref="testData-${testCase}" />
		</lang:property>
	</lang:groovy>

	<bean id="testGroovyImpl" parent="testGroovy">
		<property name="message" value="Hello World! Groovy" />
	</bean>
	<bean id="testBshImpl" parent="testBsh">
		<property name="message" value="Hello World! Beanshell" />
	</bean>

	<bean id="testDef" class="org.argeo.slc.core.test.BasicTestDefinition"
		scope="prototype" />

	<bean
		class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer" />

	<bean id="testResult" parent="slcDefault.test.basicSimpleTestResult">
	</bean>

	<bean id="testRun" class="org.argeo.slc.core.test.SimpleTestRun"
		abstract="true">
		<property name="testResult" ref="testResult" />
	</bean>

	<lang:groovy id="testGroovyBean">
		<lang:inline-script><![CDATA[
		class Message {
		String message = 'test'
		
		public String getMessage(){
			return message;
		}
		}
		]]></lang:inline-script>
	</lang:groovy>

	<lang:groovy id="testGroovy">
		<lang:inline-script><![CDATA[
		class GroovyMessenger extends org.argeo.slc.core.test.SimpleTestRun {
	
		String message = 'test'
	
			void execute(){
				println(message);
			}
		}
		]]></lang:inline-script>
	</lang:groovy>

	<lang:bsh id="testBsh" script-interfaces="org.argeo.slc.test.ExecutableTestRun">
		<lang:inline-script><![CDATA[
		setStrictJava(true);

		class BshMessenger extends org.argeo.slc.core.test.SimpleTestRun {

			String message = "test";

			public void execute(){
				System.out.println(message);
			}
			
			public void setMessage(String message){
				this.message = message;
			}
		}
		]]></lang:inline-script>
	</lang:bsh>

</beans>