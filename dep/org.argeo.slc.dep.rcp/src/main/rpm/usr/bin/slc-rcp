#!/bin/sh

JAVA_CMD=/usr/lib/jvm/jre-1.6.0/bin/java
JAVA_OPTS="-client -Xmx256m"

SLC_HOME_DIR=${HOME}/.slc/
if [ -f $SLC_HOME_DIR/settings.sh ];then
	. $SLC_HOME_DIR/settings.sh
fi

if [ -d /usr/lib64 ]; 
then
	LIB_BASE=/usr/lib64
else
	LIB_BASE=/usr/lib
fi
OSGI_FRAMEWORK=$LIB_BASE/eclipse/plugins/org.eclipse.osgi_3.6.1.R36x_v20100806.jar
ECLIPSE_LAUNCHER=$LIB_BASE/eclipse/plugins/org.eclipse.equinox.launcher_1.1.0.v20100507.jar
INSTALL_DIR=/usr/share/osgi/rcp

SLC_HOME_DIR=~/.slc
DATA_DIR=$SLC_HOME_DIR/data
CONF_DIR=$SLC_HOME_DIR/conf

mkdir -p $SLC_HOME_DIR/modules

if [ ! -f $CONF_DIR/config.ini ];
then
	mkdir -p $CONF_DIR
    cp /etc/slc-rcp/config.ini $CONF_DIR
fi

java -Dosgi.framework=$OSGI_FRAMEWORK \
 -jar $ECLIPSE_LAUNCHER \
 -install $INSTALL_DIR \
 -configuration $CONF_DIR \
 -data $DATA_DIR \
 -clean
