<!--
$HeadURL:$
$Revision:$
$LastChangedDate:$
-->
<project>
	<macrodef name="compile">
		<attribute name="srcdir" />
		<attribute name="artifact" />
		<attribute name="classpathref" default="cp.main" />
		<sequential>
			<mkdir dir="${compile.base}/@{artifact}" />
			<javac destdir="${compile.base}/@{artifact}"
				srcdir="@{srcdir}" debug="on" fork="true"
				includeantruntime="false">
				<classpath>
					<path refid="@{classpathref}" />
				</classpath>
			</javac>
		</sequential>
	</macrodef>

	<macrodef name="createJar">
		<attribute name="srcdir" />
		<attribute name="artifact" />
		<sequential>
			<jar destfile="${dist.jar}/@{artifact}.jar">
				<zipfileset dir="@{srcdir}">
					<exclude name="**/*.java" />
					<exclude name="**/*.html" />
					<include name="**/*.*" />
				</zipfileset>
				<zipfileset dir="${compile.base}/@{artifact}">
					<include name="**/*.*" />
				</zipfileset>
				<manifest>
					<attribute name="Specification-Title"
						value="${package.prefix}" />
					<attribute name="Specification-Version"
						value="${package.version}" />
					<attribute name="Implementation-Title"
						value="@{artifact}" />
					<attribute name="Implementation-Version"
						value="${package.releaseId}" />
				</manifest>
			</jar>
		</sequential>
	</macrodef>
	
	<macrodef name="createSourcesJar">
		<attribute name="srcdir" />
		<attribute name="artifact" />
		<sequential>
			<jar destfile="${dist.lib-src}/@{artifact}-sources.jar">
				<zipfileset dir="@{srcdir}">
					<include name="**/*" />
				</zipfileset>
				<manifest>
					<attribute name="Specification-Title"
						value="${package.prefix} Sources" />
					<attribute name="Specification-Version"
						value="${package.version}" />
					<attribute name="Implementation-Title"
						value="@{artifact} Sources" />
					<attribute name="Implementation-Version"
						value="${package.releaseId}" />
				</manifest>
			</jar>
		</sequential>
	</macrodef>

	<macrodef name="api">
		<attribute name="srcdir" />
		<attribute name="artifact" />
		<attribute name="classpathref" default="cp.main" />
		<element name="links" optional="true" />
		<sequential>
			<javadoc access="protected"
				destdir="${dist.doc}/@{artifact}/api" source="1.5"
				sourcepath="@{srcDir}"
				doctitle="API of @{artifact} (v${package.releaseId})"
				windowtitle="@{artifact} v${package.version}">
				<classpath>
					<path refid="@{classpathref}" />
				</classpath>
				<link href="http://java.sun.com/j2se/1.5.0/docs/api/" />
				<link
					href="http://static.springframework.org/spring/docs/2.0.x/api/" />
				<link href="http://www.hibernate.org/hib_docs/v3/api/" />
				<links />
			</javadoc>
		</sequential>
	</macrodef>
</project>