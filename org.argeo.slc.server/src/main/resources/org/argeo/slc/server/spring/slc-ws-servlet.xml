<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:aop="http://www.springframework.org/schema/aop"
	xmlns:tx="http://www.springframework.org/schema/tx"
	xsi:schemaLocation="
	 http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
	 http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
     http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd">

	<import
		resource="classpath:/org/argeo/slc/castor/spring/applicationContext.xml" />
	<import
		resource="classpath:/org/argeo/slc/xml/spring/applicationContext.xml" />

	<bean name="slcExecutionRequestEp"
		class="org.argeo.slc.ws.process.SlcExecutionRequestEp">
		<constructor-arg ref="slcExecutionDao" />
		<property name="marshaller" ref="slcDefault.castor.marshaller" />
		<property name="unmarshaller"
			ref="slcDefault.castor.marshaller" />
	</bean>

	<bean name="slcExecutionStepsRequestEp"
		class="org.argeo.slc.ws.process.SlcExecutionStepsRequestEp">
		<constructor-arg ref="slcExecutionDao" />
		<property name="marshaller" ref="slcDefault.castor.marshaller" />
		<property name="unmarshaller"
			ref="slcDefault.castor.marshaller" />
	</bean>

	<bean name="createTreeTestResultRequestEp"
		class="org.argeo.slc.ws.test.tree.CreateTreeTestResultRequestEp">
		<constructor-arg ref="testResultDao" />
		<property name="marshaller" ref="slcDefault.castor.marshaller" />
		<property name="unmarshaller"
			ref="slcDefault.castor.marshaller" />
	</bean>

	<bean name="closeTreeTestResultRequestEp"
		class="org.argeo.slc.ws.test.tree.CloseTreeTestResultRequestEp">
		<constructor-arg ref="testResultDao" />
		<property name="marshaller" ref="slcDefault.castor.marshaller" />
		<property name="unmarshaller"
			ref="slcDefault.castor.marshaller" />
	</bean>

	<bean name="resultPartRequestEp"
		class="org.argeo.slc.ws.test.tree.ResultPartRequestEp">
		<constructor-arg ref="testResultDao" />
		<constructor-arg ref="testManagerService" />
		<property name="marshaller" ref="slcDefault.castor.marshaller" />
		<property name="unmarshaller"
			ref="slcDefault.castor.marshaller" />
	</bean>

	<bean id="endPointMapping"
		class="org.springframework.ws.server.endpoint.mapping.PayloadRootQNameEndpointMapping">
		<property name="mappings">

			<props>
				<prop
					key="{http://argeo.org/projects/slc/schemas}slc-execution-request">
					slcExecutionRequestEp
				</prop>
				<prop
					key="{http://argeo.org/projects/slc/schemas}slc-execution-status-request">
					slcExecutionRequestEp
				</prop>
				<prop
					key="{http://argeo.org/projects/slc/schemas}slc-execution-steps-request">
					slcExecutionStepsRequestEp
				</prop>
				<prop
					key="{http://argeo.org/projects/slc/schemas}create-tree-test-result-request">
					createTreeTestResultRequestEp
				</prop>
				<prop
					key="{http://argeo.org/projects/slc/schemas}close-tree-test-result-request">
					closeTreeTestResultRequestEp
				</prop>
				<prop
					key="{http://argeo.org/projects/slc/schemas}result-part-request">
					resultPartRequestEp
				</prop>
			</props>
		</property>

		<property name="interceptors">
			<bean
				class="org.springframework.ws.server.endpoint.interceptor.PayloadLoggingInterceptor" />
		</property>
	</bean>

	<bean id="slcDefinition"
		class="org.springframework.ws.wsdl.wsdl11.DefaultWsdl11Definition">
		<property name="schema" ref="slcDefault.xml.xsdSchema" />
		<property name="portTypeName" value="Slc" />
		<property name="targetNamespace"
			value="http://argeo.org/projects/slc/definitions" />
		<property name="requestSuffix" value="-request" />
	</bean>

	<bean class="org.argeo.slc.ws.CustomSoapExceptionResolver" />

	<!-- Transaction

	<aop:config>
		<aop:pointcut id="resultPartRequestEpMethods"
			expression="execution(* org.argeo.slc.ws.test.tree.ResultPartRequestEp.*(..))" />
		<aop:advisor advice-ref="resultPartRequestEpAdvice"
			pointcut-ref="resultPartRequestEpMethods" />
	</aop:config>

	<tx:advice id="resultPartRequestEpAdvice"
		transaction-manager="hibernateTransactionManager">
		<tx:attributes>
			<tx:method name="*" propagation="REQUIRED" />
		</tx:attributes>
	</tx:advice>
 -->
</beans>